<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>ุบุฏูุฑ ููุญุณุงุจุงุช | PIN ุขูู</title>
  <link rel="stylesheet" href="assets/css/theme.css">
  <link rel="manifest" href="manifest.json">
  <script src="assets/js/crypto.js" defer></script>
  <script src="assets/js/app.js" defer></script>
</head>
<body>
  <header>
    <div class="container">
      <div class="brand">
        <div class="logo">GL</div>
        <div>
          <h1>ุบุฏูุฑ ููุญุณุงุจุงุช โ ูุชุญ ุจูุงุณุทุฉ PIN</h1>
          <div class="muted">ุงูุจูุงูุงุช ุชูุดููุฑ ูุญูููุง. ุงูุชุญูุง ุจุฑูุฒ ูู 4โ8 ุฃุฑูุงู.</div>
        </div>
      </div>
      <nav id="tabs" class="hidden">
        <button class="tab active" data-tab="clients">๐ฅ ุงูุนููุงุก</button>
        <button class="tab" data-tab="transactions">๐งพ ููุงุชูุฑ/ุฏูุนุงุช</button>
        <button class="tab" data-tab="expenses">๐๏ธ ุงููุตุฑููุงุช</button>
        <button class="tab" data-tab="summary">๐ ููุฎุต ุงูุดุฑูุฉ</button>
        <button class="tab" data-tab="settings">โ๏ธ ุฅุนุฏุงุฏุงุช</button>
      </nav>
    </div>
  </header>

  <main class="container">
    <!-- Gate (PIN) -->
    <div id="gate" class="gate">
      <div class="panel">
        <h2 id="gateTitle">ุฅูุดุงุก PIN</h2>
        <p id="gateDesc" class="muted">ุฃูู ูุฑุฉุ ุงุฎุชุฑ ุฑูุฒูุง ุฑููููุง ูู 4 ุฅูู 8 ุฃุฑูุงู.</p>

        <div id="newPinFields">
          <label>PIN</label>
          <input id="newPin" inputmode="numeric" pattern="[0-9]*" maxlength="8" placeholder="ูุซุงู: 123456" />
          <label>ุชุฃููุฏ PIN</label>
          <input id="newPin2" inputmode="numeric" pattern="[0-9]*" maxlength="8" placeholder="ุฃุนุฏ ุงูุฅุฏุฎุงู" />
        </div>

        <div id="unlockFields" class="hidden">
          <label>ุฃุฏุฎู PIN</label>
          <input id="unlockPin" inputmode="numeric" pattern="[0-9]*" maxlength="8" placeholder="โขโขโขโข" />
          <div class="keypad">
            <button data-k="1">1</button><button data-k="2">2</button><button data-k="3">3</button>
            <button data-k="4">4</button><button data-k="5">5</button><button data-k="6">6</button>
            <button data-k="7">7</button><button data-k="8">8</button><button data-k="9">9</button>
            <button data-k="del">โซ</button><button data-k="0">0</button><button data-k="clr">โฒ</button>
          </div>
        </div>

        <div class="actions">
          <button class="btn primary" id="gateConfirm">ูุชุงุจุนุฉ</button>
          <button class="btn" id="importEnc">โฌ๏ธ ุงุณุชูุฑุงุฏ ูุณุฎุฉ ูุดูุฑุฉ</button>
          <button class="btn danger" id="resetAll">ูุณุญ ูู ุงูุจูุงูุงุช</button>
        </div>
        <p class="muted small">
          โ๏ธ ูุง ูููู ุงุณุชุฑุฌุงุน ุงูู PIN ุนูุฏ ููุฏุงูู. ููุชุฃููู ุถุฏ ุงูุงุฎุชุฑุงู ุฌุฑูุจ 6 ุฃุฑูุงู ุฃู ุฃูุซุฑ.
        </p>
        <input id="filePicker" type="file" accept=".json" class="hidden" />
      </div>
    </div>

    <!-- App Content (same as secure full) -->
    <section id="app" class="hidden">
      <section id="clients" class="tab-pane">
        <div class="grid">
          <div class="card">
            <h2>ุฅุถุงูุฉ ุนููู</h2>
            <div class="form-grid">
              <div><label>ุงุณู ุงูุนููู</label><input id="c_name" placeholder="ูุซุงู: ุดุฑูุฉ ุดูุงู ูุฑุฏุณุชุงู" /></div>
              <div><label>ุงููุงุชู</label><input id="c_phone" placeholder="07xxxxxxxx" /></div>
              <div><label>ุงููุฏููุฉ</label><input id="c_city" placeholder="ุฃุฑุจูู" /></div>
              <div class="actions" style="align-items:end">
                <button class="btn primary" id="addClientBtn">โ ุฅุถุงูุฉ</button>
                <button class="btn ghost" id="exportClientsBtn">โฌ๏ธ ุชุตุฏูุฑ ุงูุนููุงุก</button>
              </div>
            </div>
          </div>
          <div class="card">
            <div class="toolbar">
              <div class="search" style="flex:1"><label>ุจุญุซ</label><input id="clientSearch" placeholder="ุงุจุญุซ ุจุงูุงุณู ุฃู ุงููุงุชู..." /></div>
              <div><label>ูุฑุฒ</label><select id="clientSort">
                <option value="name">ุญุณุจ ุงูุงุณู</option>
                <option value="balanceDesc">ุงูุฑุตูุฏ (ุชูุงุฒูู)</option>
                <option value="balanceAsc">ุงูุฑุตูุฏ (ุชุตุงุนุฏู)</option>
                <option value="invoices">ุนุฏุฏ ุงูุนูููุงุช</option>
              </select></div>
            </div>
            <div style="margin-top:10px; overflow:auto">
              <table>
                <thead><tr><th>ุงูุนููู</th><th>ุงููุงุชู</th><th>ุงููุฏููุฉ</th><th>ุงูุนูููุงุช</th><th>ุงูุฑุตูุฏ</th><th class="right">ุฎูุงุฑุงุช</th></tr></thead>
                <tbody id="clientRows"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section id="transactions" class="tab-pane hidden">
        <div class="grid">
          <div class="card">
            <h2>ุฅุถุงูุฉ ูุงุชูุฑุฉ / ุฎุฏูุฉ</h2>
            <div class="form-grid">
              <div><label>ุงูุนููู</label><select id="t_client"></select></div>
              <div><label>ุงููุตู</label><input id="t_desc" placeholder="ูุตู ุงูุฎุฏูุฉ" /></div>
              <div><label>ุงููุจูุบ</label><input id="t_amount" type="number" step="0.01" placeholder="0" /></div>
              <div><label>ุงูุชุงุฑูุฎ</label><input id="t_date" type="date" /></div>
              <div class="actions" style="grid-column:1/-1"><button class="btn primary" id="addInvoiceBtn">๐งพ ุฅุถุงูุฉ ูุงุชูุฑุฉ</button></div>
            </div>
          </div>
          <div class="card">
            <h2>ุชุณุฌูู ุฏูุนุฉ ูุณุชููุฉ</h2>
            <div class="form-grid">
              <div><label>ุงูุนููู</label><select id="p_client"></select></div>
              <div><label>ุงููุตู</label><input id="p_desc" placeholder="ูุซุงู: ุฏูุนุฉ ููุฏูุฉ" /></div>
              <div><label>ุงููุจูุบ</label><input id="p_amount" type="number" step="0.01" placeholder="0" /></div>
              <div><label>ุงูุชุงุฑูุฎ</label><input id="p_date" type="date" /></div>
              <div class="actions" style="grid-column:1/-1"><button class="btn primary" id="addPaymentBtn">๐ธ ุชุณุฌูู ุฏูุนุฉ</button></div>
            </div>
            <p class="muted">ุงูุฏูุนุงุช ุชููููู ุฑุตูุฏ ุงูุนููู ููุง ุชูุญุณุจ ูุตุฑูููุง ุนูู ุงูุดุฑูุฉ.</p>
          </div>
        </div>
      </section>

      <section id="expenses" class="tab-pane hidden">
        <div class="grid">
          <div class="card">
            <h2>ุฅุถุงูุฉ ูุตุฑูู ุนุงู</h2>
            <div class="form-grid">
              <div><label>ุงููุตู</label><input id="e_desc" placeholder="ูููุฏุ ุตูุงูุฉุ ุฑูุงุชุจ..." /></div>
              <div><label>ุงููุจูุบ</label><input id="e_amount" type="number" step="0.01" placeholder="0" /></div>
              <div><label>ุงูุชุงุฑูุฎ</label><input id="e_date" type="date" /></div>
              <div class="actions" style="grid-column:1/-1"><button class="btn primary" id="addExpenseBtn">๐๏ธ ุฅุถุงูุฉ ูุตุฑูู</button></div>
            </div>
          </div>
          <div class="card">
            <h2>ุณุฌู ุงููุตุฑููุงุช</h2>
            <div style="overflow:auto">
              <table>
                <thead><tr><th>ุงูุชุงุฑูุฎ</th><th>ุงููุตู</th><th>ุงููุจูุบ</th><th class="right">ุฎูุงุฑุงุช</th></tr></thead>
                <tbody id="expenseRows"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section id="summary" class="tab-pane hidden">
        <div class="grid">
          <div class="card">
            <h2>ููุฎุต ุณุฑูุน</h2>
            <div class="stats">
              <div class="stat"><small>ุฅุฌูุงูู ุงูููุงุชูุฑ</small><h3 id="s_totalInvoices">-</h3></div>
              <div class="stat"><small>ุฅุฌูุงูู ุงูุฏูุนุงุช</small><h3 id="s_totalPayments">-</h3></div>
              <div class="stat"><small>ุฅุฌูุงูู ุงููุตุฑููุงุช</small><h3 id="s_totalExpenses">-</h3></div>
              <div class="stat"><small>ุตุงูู ุงูุฑุจุญ</small><h3 id="s_netProfit">-</h3></div>
            </div>
            <p class="muted">ุงูุฑุจุญ = ูุฌููุน ุงูููุงุชูุฑ โ ุงููุตุฑููุงุช.</p>
          </div>
          <div class="card">
            <h2>ุฃูุถู ุงูุนููุงุก</h2>
            <div style="overflow:auto">
              <table>
                <thead><tr><th>ุงูุนููู</th><th>ุนุฏุฏ ุงูููุงุชูุฑ</th><th>ุฅุฌูุงูู ููุงุชูุฑู</th><th>ุงูุฑุตูุฏ</th></tr></thead>
                <tbody id="topClientsRows"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <section id="settings" class="tab-pane hidden">
        <div class="card">
          <h2>ุฅุนุฏุงุฏุงุช ููุณุฎ ุงุญุชูุงุทู</h2>
          <div class="form-grid">
            <div><label>ุงูุนููุฉ (ุฑูุฒ)</label><input id="currencyCode" placeholder="USD" /></div>
            <div><label>ุชูุณูู ุงูุฃุฑูุงู</label><select id="localeSelect">
              <option value="en-US">en-US</option>
              <option value="ar">ar</option>
              <option value="ar-SA">ar-SA</option>
            </select></div>
            <div class="actions" style="grid-column:1/-1">
              <button class="btn primary" id="saveSettingsBtn">๐พ ุญูุธ ุงูุฅุนุฏุงุฏุงุช</button>
              <button class="btn" id="exportAllBtn">โฌ๏ธ ุชุตุฏูุฑ ูุณุฎุฉ ูุดููุฑุฉ</button>
              <button class="btn" id="lockBtn">๐ ููู ุงูุชุทุจูู</button>
            </div>
          </div>
        </div>
      </section>
    </section>
  </main>

  <!-- Drawer -->
  <div class="drawer" id="drawer">
    <div class="drawer-panel">
      <div style="display:flex; justify-content:space-between; align-items:center; gap:10px; position:sticky; top:0; background:#0b1224; padding-bottom:10px">
        <div><h2 id="d_title" style="margin:0">ูุดู ุญุณุงุจ</h2><div class="muted" id="d_subtitle"></div></div>
        <div class="actions"><button class="btn" id="d_export">โฌ๏ธ ุชุตุฏูุฑ</button><button class="btn" id="d_close">โ๏ธ ุฅุบูุงู</button></div>
      </div>
      <div class="toolbar" style="margin-top:8px">
        <div class="search" style="flex:1"><label>ุจุญุซ</label><input id="d_search" placeholder="ุชุตููุฉ ุญุณุจ ุงููุตู..." /></div>
        <div><label>ุงููุฏุฉ</label><select id="d_range">
          <option value="all">ูู ุงูููุช</option><option value="30">ุขุฎุฑ 30 ููู</option><option value="90">ุขุฎุฑ 90 ููู</option><option value="365">ุขุฎุฑ ุณูุฉ</option>
        </select></div>
      </div>
      <div style="margin-top:10px; overflow:auto">
        <table>
          <thead><tr><th>ุงูุชุงุฑูุฎ</th><th>ุงูุจูุงู</th><th>ุงูููุน</th><th>ุงููุจูุบ</th><th>ุงูุฑุตูุฏ ุจุนุฏ ุงูุนูููุฉ</th><th class="right">ุฎูุงุฑุงุช</th></tr></thead>
          <tbody id="d_rows"></tbody>
        </table>
      </div>
    </div>
  </div>
</body>
</html>
